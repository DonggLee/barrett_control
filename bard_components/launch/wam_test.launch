<launch>
  <!--node pkg="ocl" name="wam_rtt" launch-prefix="screen" type="deployer-xenomai" args="-s $(find bard_components)/scripts/wam_test.ops "/-->
  <node pkg="ocl" name="wam_rtt" type="deployer-xenomai" args="-s $(find bard_components)/scripts/wam_test.ops --" output="screen"/>

  <group ns="wam_rtt">

    <!-- Parameters for WAM RTT device -->
    <group ns="wam_left">
      <include file="$(find bard_components)/launch/left_params.launch"/>
      <rosparam param="initial_positions">{Element0: 0.0, Element1: rad(-pi/2), Element2: 0.0, Element3: rad(pi), Element4: 0.0, Element5: 0.0, Element6: 0.0}</rosparam>
      <param name="can_dev_name" value="rtcan1"/>
      <param name="joint_state_throttle_period" value="0.01"/>

      <!-- Publish TF Frames for all the joints -->
      <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher"/>
    </group>

    <!-- Parameters for controller mux -->
    <group ns="wam_left_mux">
      <include file="$(find bard_components)/launch/left_params.launch"/>
      <param name="joint_state_throttle_period" value="0.1"/>
    </group>

    <!-- Parameters for trivial controller -->
    <group ns="wam_left_con_trivial">
      <include file="$(find bard_components)/launch/left_params.launch"/>
    </group>

    <!-- Parameters for gravity compensation controller -->
    <group ns="wam_left_con_grav">
      <include file="$(find bard_components)/launch/left_params.launch"/>
      <rosparam param="gravity">{Element0: -9.8, Element1: 0.0, Element2: 0.0}</rosparam>
    </group>

    <!-- Parameters for cartesian wrench controller -->
    <group ns="wam_left_con_wrench">
      <include file="$(find bard_components)/launch/left_params.launch"/>
      <rosparam param="Kp">{Element0: 200.0, Element1: 200.0, Element2: 200.0, Element3: 4.0, Element4: 4.0, Element5: 1.0}</rosparam>
      <rosparam param="Kd">{Element0: 0.0, Element1: 0.0, Element2: 0.0, Element3: 0.0, Element4: 0.0, Element5: 0.0}</rosparam>
      <param name="target_frame" value="/wam_target"/>
    </group>

    <!-- parameters for joint pose controller -->
    <group ns="wam_left_con_pose">
      <include file="$(find bard_components)/launch/left_params.launch"/>
      <rosparam param="Kp">{Element0: 1.0, Element1: 1.0, Element2: 1.0, Element3: 1.0, Element4: 0.5, Element5: 0.5, Element6: 0.2}</rosparam>
      <rosparam param="Kd">{Element0: 0.0, Element1: 0.0, Element2: 0.0, Element3: 0.0, Element4: 0.0, Element5: 0.0, Element6: 0.0}</rosparam>
      <param name="target_frame" value="/wam_target"/>

      <!-- Publish TF Frames for all the joints -->
      <node name="ik_transform_publisher" pkg="tf" type="static_transform_publisher" args=" 0 0 0 0 0 0 /baseLink /pose_ik/baseLink 10"/>
      <param name="joint_state_throttle_period" value="0.1"/>
      <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher">
        <param name="tf_prefix" value="pose_ik"/>
      </node>
    </group>

  </group>
</launch>
